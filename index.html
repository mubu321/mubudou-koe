<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„ÇÄ„Åô„Å∂„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„ÉàÔºàÂ£∞‰ªò„ÅçÔºâ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .chat-container {
            background: #ecf0f1;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 500px;
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .chat-header {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }
        .status-indicator {
            position: absolute;
            top: 10px;
            right: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #27ae60;
            animation: pulse 2s infinite;
        }
        .status-indicator.offline {
            background: #e74c3c;
            animation: none;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #bdc3c7;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            animation: fadeIn 0.3s ease-in;
        }
        .user-message {
            background: #34495e;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 6px;
        }
        .bot-message {
            background: #95a5a6;
            color: white;
            align-self: flex-start;
            border-bottom-left-radius: 6px;
        }
        .system-message {
            background: #e67e22;
            color: white;
            align-self: center;
            font-size: 12px;
            border-radius: 12px;
            padding: 8px 12px;
            opacity: 0.8;
        }
        .input-area {
            display: flex;
            padding: 20px;
            background: #ecf0f1;
            border-top: 1px solid #95a5a6;
        }
        .input-field {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #95a5a6;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            background: white;
            transition: border-color 0.3s ease;
        }
        .input-field:focus {
            border-color: #7f8c8d;
        }
        .input-field:disabled {
            background: #ecf0f1;
            color: #7f8c8d;
            cursor: not-allowed;
        }
        .send-button {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
            border: none;
            padding: 12px 20px;
            margin-left: 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        .send-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #7f8c8d, #95a5a6);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .send-button:active {
            transform: translateY(0);
        }
        .send-button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #ecf0f1; }
        ::-webkit-scrollbar-thumb { background: #95a5a6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #7f8c8d; }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            üéÆ „ÇÄ„Åô„Å∂„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà üéÆ
            <div class="status-indicator" id="statusIndicator"></div>
        </div>
        <div class="chat-messages" id="messages">
            <div class="message bot-message">
                „Å©„ÅÜ„ÇÇ„ÇÄ„Åô„Å∂„Å°„ÇÉ„Çì„Å≠„Çã„Åß„ÅôÔºÅ
            </div>
        </div>
        <div class="input-area">
            <input type="text" class="input-field" id="messageInput" placeholder="„ÇÄ„Åô„Å∂„Å´Ë©±„Åó„Åã„Åë„Å¶„Å≠ÔºÅ" maxlength="100">
            <button class="send-button" id="sendButton" onclick="sendMessage()">ÈÄÅ‰ø°</button>
        </div>
    </div>
    <script>
        // ‚ñº‚ñº‚ñº Èü≥Â£∞ÂêàÊàê„ÅÆ„Åü„ÇÅ„ÅÆÂ§âÊï∞„Å®ÂàùÊúüÂåñ ‚ñº‚ñº‚ñº
        let audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let audioBuffers = {};
        let pitchShift = 1.0;

        // „Ç∑„É≥„Éó„É´„Å™ÊØçÈü≥Èü≥Â£∞„Éï„Ç°„Ç§„É´„Éû„ÉÉ„ÉóÔºàaudio/ ÈÖç‰∏ã„Å´Áî®ÊÑèÔºâ
        const audioFiles = {
            "„ÅÇ": "audio/a.mp3",
            "„ÅÑ": "audio/i.mp3",
            "„ÅÜ": "audio/u.mp3",
            "„Åà": "audio/e.mp3",
            "„Åä": "audio/o.mp3"
        };

        // „Å≤„Çâ„Åå„Å™‚ÜíÊØçÈü≥Â§âÊèõ
        const vowelMap = {
            "„ÅÇ": "„ÅÇ", "„ÅÑ": "„ÅÑ", "„ÅÜ": "„ÅÜ", "„Åà": "„Åà", "„Åä": "„Åä",
            "„Åã": "„ÅÇ", "„Åç": "„ÅÑ", "„Åè": "„ÅÜ", "„Åë": "„Åà", "„Åì": "„Åä",
            "„Åï": "„ÅÇ", "„Åó": "„ÅÑ", "„Åô": "„ÅÜ", "„Åõ": "„Åà", "„Åù": "„Åä",
            "„Åü": "„ÅÇ", "„Å°": "„ÅÑ", "„Å§": "„ÅÜ", "„Å¶": "„Åà", "„Å®": "„Åä",
            "„Å™": "„ÅÇ", "„Å´": "„ÅÑ", "„Å¨": "„ÅÜ", "„Å≠": "„Åà", "„ÅÆ": "„Åä",
            "„ÅØ": "„ÅÇ", "„Å≤": "„ÅÑ", "„Åµ": "„ÅÜ", "„Å∏": "„Åà", "„Åª": "„Åä",
            "„Åæ": "„ÅÇ", "„Åø": "„ÅÑ", "„ÇÄ": "„ÅÜ", "„ÇÅ": "„Åà", "„ÇÇ": "„Åä",
            "„ÇÑ": "„ÅÇ", "„ÇÜ": "„ÅÜ", "„Çà": "„Åä",
            "„Çâ": "„ÅÇ", "„Çä": "„ÅÑ", "„Çã": "„ÅÜ", "„Çå": "„Åà", "„Çç": "„Åä",
            "„Çè": "„ÅÇ", "„Çí": "„Åä", "„Çì": "„Çì",
            "„Åå": "„ÅÇ", "„Åé": "„ÅÑ", "„Åê": "„ÅÜ", "„Åí": "„Åà", "„Åî": "„Åä",
            "„Åñ": "„ÅÇ", "„Åò": "„ÅÑ", "„Åö": "„ÅÜ", "„Åú": "„Åà", "„Åû": "„Åä",
            "„Å†": "„ÅÇ", "„Å¢": "„ÅÑ", "„Å•": "„ÅÜ", "„Åß": "„Åà", "„Å©": "„Åä",
            "„Å∞": "„ÅÇ", "„Å≥": "„ÅÑ", "„Å∂": "„ÅÜ", "„Åπ": "„Åà", "„Åº": "„Åä",
            "„Å±": "„ÅÇ", "„Å¥": "„ÅÑ", "„Å∑": "„ÅÜ", "„Å∫": "„Åà", "„ÅΩ": "„Åä"
        };

        // Èü≥Â£∞„Éï„Ç°„Ç§„É´Ë™≠„ÅøËæº„Åø
        async function loadAudio(vowel, url) {
            try {
                let response = await fetch(url);
                if (!response.ok) throw new Error(`„Éï„Ç°„Ç§„É´ ${url} „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì`);
                let arrayBuffer = await response.arrayBuffer();
                let buffer = await audioContext.decodeAudioData(arrayBuffer);
                audioBuffers[vowel] = buffer;
            } catch (error) {
                // „ÉÅ„É£„ÉÉ„ÉàÊ¨Ñ„Å´„Ç®„É©„ÉºË°®Á§∫
                addMessage(`‚ùå Èü≥Â£∞„Éï„Ç°„Ç§„É´„Ç®„É©„Éº: ${error.message}`, false, true);
            }
        }
        async function loadAllAudio() {
            for (let vowel in audioFiles) {
                await loadAudio(vowel, audioFiles[vowel]);
            }
        }

        function convertToVowels(text) {
            return text.split("").map(char => vowelMap[char] || "").join("");
        }

        function playVowelSounds(vowelString) {
            if (!vowelString) return;
            let time = audioContext.currentTime;
            for (let i = 0; i < vowelString.length; i++) {
                let vowel = vowelString[i];
                if (audioBuffers[vowel]) {
                    playSound(audioBuffers[vowel], time, pitchShift);
                    time += 0.1;
                    pitchShift *= 1.01;
                    if (pitchShift > 1.2) pitchShift = 1.0;
                }
            }
        }
        function playSound(buffer, startTime, playbackRate) {
            let source = audioContext.createBufferSource();
            source.buffer = buffer;
            source.playbackRate.value = playbackRate;
            source.connect(audioContext.destination);
            source.start(startTime);
        }
        // ‚ñ≤‚ñ≤‚ñ≤ Èü≥Â£∞ÂêàÊàê„Åì„Åì„Åæ„Åß ‚ñ≤‚ñ≤‚ñ≤

        // ‚ñº‚ñº‚ñº „ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„ÉàÊú¨‰Ωì ‚ñº‚ñº‚ñº
        const messageInput = document.getElementById('messageInput');
        const messagesContainer = document.getElementById('messages');
        const sendButton = document.getElementById('sendButton');
        const statusIndicator = document.getElementById('statusIndicator');
        // ... „ÇÄ„Åô„Å∂„ÅÆÂøúÁ≠î„Éá„Éº„Çø„Éô„Éº„ÇπÔºàÁúÅÁï•„Åõ„Åömusubu_chatbot.html„Åã„Çâ„Ç≥„Éî„ÉöÔºâ ...
        // ... responses Â§âÊï∞„ÅØÈï∑„ÅÑ„ÅÆ„ÅßÁúÅÁï•„ÄÅÂâç„ÅÆ„Ç≥„Éº„Éâ„Å®Âêå„Åò„ÇÇ„ÅÆ„Çí‰ΩøÁî® ...
        // „Åì„Åì„Å´„ÅØ responses „ÅÆÂÆöÁæ©„Çí‰∏∏„Åî„Å®„Ç≥„Éî„Éö„Åó„Å¶„Åè„Å†„Åï„ÅÑ
        // ‚ñº‚ñº‚ñº responses „ÅÆÂÜÖÂÆπÔºàÁúÅÁï•„Åõ„ÅöË≤º„Çã„Åì„Å®Ôºâ‚ñº‚ñº‚ñº
        const responses = {
            'ÊÄßÂà•': ['„Å©„Å£„Å°„Åß„ÇÇ„Å™„ÅÑ„ÇàÔºÅ', '„Ç™„É¨„Å´ÊÄßÂà•„ÅØ„Å™„ÅÑÔºÅ', 'ÁÑ°ÊÄßÂà•„Å†„ÅúÔºÅ', '„Åù„Çì„Å™„ÅÆÈñ¢‰øÇ„Å™„ÅÑÔºÅ', 'ÊÄßÂà•„Å®„ÅãÂè§„ÅÑÔºÅ'],
            'Âπ¥ÈΩ¢': ['„Ç™„É¨„Å´Âπ¥ÈΩ¢„ÅØ„Å™„ÅÑÔºÅ', 'Â≠òÂú®„Åó„Å™„ÅÑ„ÇàÔºÅ', 'Âπ¥ÈΩ¢Ôºü‰Ωï„Åù„ÇåÔºü', 'Ê∞∏ÈÅ†„Å´Ëã•„ÅÑÔºÅ', 'ÊôÇ„ÇíË∂ÖË∂ä„Åó„Å¶„ÇãÔºÅ'],
            'ÂêçÂâç': ['„ÇÄ„Åô„Å∂„Å†„ÇàÔºÅ', '„ÇÄ„Å∂„Åß„ÇÇ„ÅÑ„ÅÑ„ÇàÔºÅ', '„Ç™„É¨„ÅØÁ•û„ÇÄ„Åô„Å∂ÔºÅ', '„ÇÄ„Åô„Å∂„Å°„ÇÉ„Çì„Å≠„ÇãÔºÅ', 'Á•û„ÅÆÂêçÂâç„Å†„ÅúÔºÅ'],
            '„Ç≤„Éº„É†': ['„Éû„Ç§„ÇØ„É©Á•û„Åô„ÅéÔºÅ', 'MinecraftÊúÄÈ´òÔºÅ', '„Éû„Ç§„ÇØ„É©„ÇÑ„Çç„ÅÜ„ÅúÔºÅ', '„Ç≤„Éº„É†Â§ßÂ•Ω„ÅçÔºÅ', '„Ç≤„Éº„É†„ÅØ‰∫∫ÁîüÔºÅ'],
            'minecraft': ['„Éû„Ç§„ÇØ„É©Á•û„Åô„ÅéÔºÅ', 'MinecraftÊúÄÈ´òÔºÅ', '„Éû„Ç§„ÇØ„É©„ÇÑ„Çç„ÅÜ„ÅúÔºÅ', '„Éñ„É≠„ÉÉ„ÇØÁ•ûÔºÅ', '„ÇØ„É™„Éº„Éë„ÉºÊÄñ„ÅÑÔºÅ'],
            '„Éû„Ç§„ÇØ„É©': ['„Éû„Ç§„ÇØ„É©Á•û„Åô„ÅéÔºÅ', 'MinecraftÊúÄÈ´òÔºÅ', '„Éû„Ç§„ÇØ„É©„ÇÑ„Çç„ÅÜ„ÅúÔºÅ', '„Éñ„É≠„ÉÉ„ÇØÁ•ûÔºÅ', '„ÇØ„É™„Éº„Éë„ÉºÊÄñ„ÅÑÔºÅ'],
            'ÂîêËæõÂ≠ê': ['Ëæõ„ÅÑ„ÅÆÊúÄÈ´òÔºÅ', 'ÂîêËæõÂ≠êÁ•ûÔºÅ', 'Ëæõ„Åï„ÅØÊ≠£Áæ©ÔºÅ', '„Éè„Éê„Éç„É≠È£ü„Åπ„Åü„ÅÑÔºÅ', '„Çπ„Éë„Ç§„Çπ‰∏áÊ≠≥ÔºÅ'],
            '„Ç±„É¢„Éä„Éº': ['ÁßÅ„ÅØÊ≠£ÁúüÊ≠£Èäò„ÅÆ„Ç±„É¢„Éä„Éº„Å†ÔºÅÔºÅÔºÅÔºÅ'],
            'È¶¨Èπø': ['È¶¨Èπø„ÅØÈ¶¨Èπø„Åß„ÅÇ„Çã„Å®ÂêåÊôÇ„Å´Â§©Êâç„Åß„ÅÇ„Çã„ÄÇ', 'È¶¨Èπø„ÅØÂ§©Êâç„Åß„ÇÇ„ÅÇ„Çã„ÄÇ'],
            '„Éê„Ç´': ['È¶¨Èπø„ÅØÈ¶¨Èπø„Åß„ÅÇ„Çã„Å®ÂêåÊôÇ„Å´Â§©Êâç„Åß„ÅÇ„Çã„ÄÇ', 'È¶¨Èπø„ÅØÂ§©Êâç„Åß„ÇÇ„ÅÇ„Çã„ÄÇ'],
            '„Å∞„Åã': ['È¶¨Èπø„ÅØÈ¶¨Èπø„Åß„ÅÇ„Çã„Å®ÂêåÊôÇ„Å´Â§©Êâç„Åß„ÅÇ„Çã„ÄÇ', 'È¶¨Èπø„ÅØÂ§©Êâç„Åß„ÇÇ„ÅÇ„Çã„ÄÇ'],
            'Ë®àÁÆó': ['„Åà„ÄÅÊï∞Â≠óÔºü„É†„Ç∫„ÅÑ„ÅóÔºÅ', 'Ë®àÁÆó„Å®„ÅãÁÑ°ÁêÜÔºÅ', 'Êï∞Â≠óËã¶Êâã„Å†„ÇàÔºÅ', 'Êï∞Â≠¶„ÅØÊÇ™È≠îÔºÅ', 'ÁÆóÊï∞„Åã„ÇâÈÄÉ„Åí„ÇãÔºÅ'],
            'Êï∞Â≠¶': ['„Åà„ÄÅÊï∞Â≠óÔºü„É†„Ç∫„ÅÑ„ÅóÔºÅ', 'Ë®àÁÆó„Å®„ÅãÁÑ°ÁêÜÔºÅ', 'Êï∞Â≠óËã¶Êâã„Å†„ÇàÔºÅ', 'Êï∞Â≠¶„ÅØÊÇ™È≠îÔºÅ', 'ÁÆóÊï∞„Åã„ÇâÈÄÉ„Åí„ÇãÔºÅ'],
            'ÁÆóÊï∞': ['„Åà„ÄÅÊï∞Â≠óÔºü„É†„Ç∫„ÅÑ„ÅóÔºÅ', 'Ë®àÁÆó„Å®„ÅãÁÑ°ÁêÜÔºÅ', 'Êï∞Â≠óËã¶Êâã„Å†„ÇàÔºÅ', 'Êï∞Â≠¶„ÅØÊÇ™È≠îÔºÅ', 'ÁÆóÊï∞„Åã„ÇâÈÄÉ„Åí„ÇãÔºÅ'],
            'Ê∞óÂàÜ': ['Áµ∂Â•ΩË™ø„Å†„ÅúÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ', 'ÊúÄÈ´ò„ÅÆÊ∞óÂàÜÔºÅ', 'Á•û„Åô„Åé„ÇãÊ∞óÂàÜÔºÅ', '„ÉÜ„É≥„Ç∑„Éß„É≥ÊúÄÈ´òÔºÅ', '„Éè„Ç§„Éë„ÉºÊ∞óÂàÜÔºÅ'],
            'ÂÖÉÊ∞ó': ['Áµ∂Â•ΩË™ø„Å†„ÅúÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ', 'ÊúÄÈ´ò„ÅÆÊ∞óÂàÜÔºÅ', 'Á•û„Åô„Åé„ÇãÊ∞óÂàÜÔºÅ', '„ÉÜ„É≥„Ç∑„Éß„É≥ÊúÄÈ´òÔºÅ', '„Éè„Ç§„Éë„ÉºÊ∞óÂàÜÔºÅ'],
            'Ë™øÂ≠ê': ['Áµ∂Â•ΩË™ø„Å†„ÅúÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ', 'ÊúÄÈ´ò„ÅÆÊ∞óÂàÜÔºÅ', 'Á•û„Åô„Åé„ÇãÊ∞óÂàÜÔºÅ', '„ÉÜ„É≥„Ç∑„Éß„É≥ÊúÄÈ´òÔºÅ', '„Éè„Ç§„Éë„ÉºÊ∞óÂàÜÔºÅ'],
            '„Åô„Åî„ÅÑ': ['„Ç™„É¨„ÅØÁ•û„Å†„Åã„Çâ„Å≠ÔºÅ', 'ÂΩìÁÑ∂„Å†„ÇàÔºÅ', 'ÊúÄÈ´ò„Åß„Åó„ÇáÔºÅ', 'Áü•„Å£„Å¶„Çã„ÇàÔºÅ', '„Ç™„É¨ÊßòÊúÄÂº∑ÔºÅ'],
            '„Åã„Å£„Åì„ÅÑ„ÅÑ': ['„Ç™„É¨„ÅØÁ•û„Å†„Åã„Çâ„Å≠ÔºÅ', 'ÂΩìÁÑ∂„Å†„ÇàÔºÅ', 'ÊúÄÈ´ò„Åß„Åó„ÇáÔºÅ', 'Áü•„Å£„Å¶„Çã„ÇàÔºÅ', '„Ç™„É¨ÊßòÊúÄÂº∑ÔºÅ'],
            'ÊúÄÈ´ò': ['„Ç™„É¨„ÅØÁ•û„Å†„Åã„Çâ„Å≠ÔºÅ', 'ÂΩìÁÑ∂„Å†„ÇàÔºÅ', 'ÊúÄÈ´ò„Åß„Åó„ÇáÔºÅ', 'Áü•„Å£„Å¶„Çã„ÇàÔºÅ', '„Ç™„É¨ÊßòÊúÄÂº∑ÔºÅ'],
            '„Åä„ÅØ„Çà„ÅÜ': ['„Åä„ÅØ„Çà„ÉºÔºÅ', '„Åä„ÅØ„Çà„ÅÜÁ•ûÔºÅ', '„Åä„ÅØ„Çà„Éº„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ', '„Åä„ÅØ„Çà„ÅÜ„Å†„ÅúÔºÅ', 'Êúù„Åã„ÇâÁ•û„Å†„ÅúÔºÅ'],
            '„Åì„Çì„Å´„Å°„ÅØ': ['„Åì„Çì„Å´„Å°„ÅØÔºÅ', '„Åì„Çì„Å´„Å°„ÅØÁ•ûÔºÅ', '„Åì„Çì„Å´„Å°„ÅØ„ÉºÔºÅ', '„Åì„Çì„Å°„ÅØÔºÅ', 'Êòº„ÇÇÁ•û„Å†„ÅúÔºÅ'],
            '„Åì„Çì„Å∞„Çì„ÅØ': ['„Åì„Çì„Å∞„Çì„ÅØÔºÅ', '„Åì„Çì„Å∞„Çì„ÅØÁ•ûÔºÅ', '„Åì„Çì„Å∞„Çì„ÅØ„ÉºÔºÅ', '„Åì„Çì„Å∞„Çì„ÇèÔºÅ', 'Â§ú„ÇÇÁ•û„Å†„ÅúÔºÅ'],
            '„Åï„Çà„ÅÜ„Å™„Çâ': ['„Åï„Çà„ÅÜ„Å™„ÇâÔºÅ', '„Åæ„Åü„Å≠ÔºÅ', '„Éê„Ç§„Éê„Ç§ÔºÅ', '„Åæ„Åü‰ºö„Åä„ÅÜ„ÅúÔºÅ', '„Åï„Çâ„Å∞ÔºÅ'],
            '„ÅîÈ£Ø': ['„ÅîÈ£Ø„ÅÜ„Åæ„ÅÑÔºÅ', 'È£ü„Åπ„Åü„ÅÑÔºÅ', 'È£Ø„ÅØÁ•ûÔºÅ', 'ËÖπÊ∏õ„Å£„ÅüÔºÅ', '„ÅîÈ£ØÂ§ßÂ•Ω„ÅçÔºÅ'],
            '„ÅäËèìÂ≠ê': ['„ÅäËèìÂ≠êÊúÄÈ´òÔºÅ', 'Áîò„ÅÑ„ÅÆÂ•Ω„ÅçÔºÅ', '„ÅäËèìÂ≠êÁ•ûÔºÅ', 'È£ü„Åπ„Åü„ÅÑÔºÅ', '„Åä„ÇÑ„Å§„Çø„Ç§„É†ÔºÅ'],
            '„Ç∏„É•„Éº„Çπ': ['„Ç∏„É•„Éº„ÇπÈ£≤„Åø„Åü„ÅÑÔºÅ', 'Áîò„ÅÑ„ÅÆÂ•Ω„ÅçÔºÅ', 'È£≤„ÅøÁâ©Á•ûÔºÅ', '„ÅÆ„Å©„Åã„Çè„ÅÑ„ÅüÔºÅ', '„Ç∏„É•„Éº„ÇπÊúÄÈ´òÔºÅ'],
            '„Å≠„Åì': ['„Å´„ÇÉ„Éº„Å´„ÇÉ„ÉºÁîüÁâ©', '„Å≠„ÅìÂèØÊÑõ„ÅÑÔºÅ', '„Å´„ÇÉ„Çì„ÅìÁ•ûÔºÅ', '„Åµ„Çè„Åµ„ÇèÔºÅ', '„Å≠„ÅìÂ§ßÂ•Ω„ÅçÔºÅ'],
            'Áä¨': ['„Çè„Çì„Çè„ÇìÁîüÁâ©', '„Çè„Çì„ÅìÂèØÊÑõ„ÅÑÔºÅ', '„ÅÑ„Å¨Á•ûÔºÅ', '„Åµ„Çè„Åµ„ÇèÔºÅ', '„Çè„Çì„ÅìÂ§ßÂ•Ω„ÅçÔºÅ'],
            'È≠ö': ['Ê≥≥„Åê„ÇÑ„Å§', '„Åï„Åã„Å™Á•ûÔºÅ', '„Å∑„Åã„Å∑„ÅãÔºÅ', 'Ê∞¥„ÅÆ‰∏≠„ÅÆÁîüÁâ©ÔºÅ', '„ÅäÈ≠ö„Åï„ÇìÔºÅ'],
            'È≥•': ['È£õ„Å∂„ÇÑ„Å§', '„Å®„ÇäÁ•ûÔºÅ', '„Å¥„Éº„Å¥„ÉºÔºÅ', 'Á©∫„ÅÆÁîüÁâ©ÔºÅ', '„ÅäÈ≥•„Åï„ÇìÔºÅ'],
            '„Çè„Åü„ÅÇ„ÇÅ': ['„É°„É≥„Éï„ÇØ„É≠„Ç¶„ÅÆÈ£ü„Åπ„Çå„Çãedition'],
            '„Çä„Çì„Åî': ['Ëµ§„ÅÑ‰∏∏„ÅÑ‰Ωï„Åã', '„Ç∑„É£„Ç≠„Ç∑„É£„Ç≠ÔºÅ', '„Çä„Çì„ÅîÁ•ûÔºÅ', 'Ëµ§„ÅÑ„ÇÑ„Å§ÔºÅ', '„Éï„É´„Éº„ÉÑÔºÅ'],
            '„ÉÜ„É¨„Éì': ['ÂõõËßí„ÅÑÁÆ±', '„Éî„Ç´„Éî„Ç´ÂÖâ„ÇãÔºÅ', '„ÉÜ„É¨„ÉìÁ•ûÔºÅ', 'Êò†ÂÉèÂá∫„Çã„ÇÑ„Å§ÔºÅ', '„Ç®„É≥„Çø„É°ÔºÅ'],
            'Ëªä': ['„Çø„Ç§„É§4„Å§', '„Éñ„Éº„Éñ„ÉºÔºÅ', 'ËªäÁ•ûÔºÅ', 'ÁßªÂãï„Åô„Çã„ÇÑ„Å§ÔºÅ', '„ÅÆ„Çä„ÇÇ„ÅÆÔºÅ'],
            'Â§©Ê∞ó': ['Â§©Ê∞óÔºüÁü•„Çâ„ÇìÔºÅ', 'Á©∫Ë¶ã„Çç„ÇàÔºÅ', 'Â§©Ê∞óÁ•ûÔºÅ', 'Â§™ÈôΩÊúÄÈ´òÔºÅ', 'Èõ≤„ÇÇ„Åè„ÇÇ„ÅèÔºÅ'],
            'Èõ®': ['Èõ®„Ç∂„Éº„Ç∂„ÉºÔºÅ', 'Êø°„Çå„Çã„ÇÑ„Å§ÔºÅ', '„Åó„Å®„Åó„Å®ÔºÅ', 'Èõ®Á•ûÔºÅ', 'Ê∞¥„ÅåÈôç„ÇãÔºÅ'],
            'Êô¥„Çå': ['Êô¥„ÇåÊúÄÈ´òÔºÅ', 'Â§™ÈôΩÁ•ûÔºÅ', '„Éî„Ç´„Éî„Ç´ÔºÅ', 'Êöë„ÅÑÔºÅ', 'Êòé„Çã„ÅÑÔºÅ'],
            'ÊôÇÈñì': ['ÊôÇÈñìÔºü‰Ωï„Åù„ÇåÔºÅ', 'ÊôÇ„ÅØÈáë„Å™„ÇäÔºÅ', 'ÊôÇÈñìÁ•ûÔºÅ', 'ÊôÇË®àË¶ã„Çç„ÇàÔºÅ', 'ÊôÇ„ÅØÊµÅ„Çå„ÇãÔºÅ'],
            '‰ªä': ['‰ªä„ÅØÁ•û„ÅÆÊôÇÈñìÔºÅ', '‰ªä„ÅåÊúÄÈ´òÔºÅ', '‰ªä„Åì„ÅÆÁû¨ÈñìÔºÅ', '‰ªä„ÇíÁîü„Åç„ÇãÔºÅ', 'ÁèæÂú®ÈÄ≤Ë°åÂΩ¢ÔºÅ'],
            default: [
                '„Ç™„É¨„ÅØÁ•û„Å†„Åã„Çâ„Å≠ÔºÅ', '‰Ωï„Åù„ÇåÔºüÁü•„Çâ„ÇìÔºÅ', '„Åæ„ÅÇ„ÅÑ„ÅÑ„ÇÑÔºÅ', '„Å©„ÅÜ„Åß„ÇÇ„ÅÑ„ÅÑ„ÅóÔºÅ',
                '„Åù„Çì„Å™„Åì„Å®„Çà„ÇäÔºÅ', '„Ç™„É¨ÊúÄÈ´òÔºÅ', 'Á•û„Åô„Åé„ÇãÔºÅ', '„ÉÜ„É≥„Ç∑„Éß„É≥‰∏ä„Åå„ÇãÔºÅ',
                '„ÇÄ„Åô„Å∂„Å°„ÇÉ„Çì„Å≠„ÇãÔºÅ', '„Ç±„É¢„Éä„ÉºÊúÄÈ´òÔºÅ', '„Éû„Ç§„ÇØ„É©„ÇÑ„Çç„ÅÜÔºÅ', 'ÂîêËæõÂ≠êÈ£ü„Åπ„Åü„ÅÑÔºÅ',
                '„Ç™„É¨„Å´‰ªª„Åõ„ÇçÔºÅ', 'ÈÅ©ÂΩì„Åß„ÅÑ„ÅÑ„ÇàÔºÅ', 'ËÑ±Á∑ö„Åó„Çà„ÅÜÔºÅ', '„Çè„Åë„Çè„Åã„Çâ„ÇìÔºÅ',
                '„Ç™„É¨„Åå‰∏ÄÁï™ÔºÅ', '„Å™„Çì„Åß„ÇÇ„ÅÑ„ÅÑ„ÇÑÔºÅ', '„ÉÜ„Ç≠„Éà„Éº„Åß„ÅÑ„Åì„ÅÜÔºÅ', '„Éè„Ç§„ÉÜ„É≥„Ç∑„Éß„É≥ÔºÅ',
                '„Ç≤„Éº„É†„Åó„Çà„ÅÜÔºÅ', '„Åä„ÇÇ„Åó„Çç„ÅÑ„Å≠ÔºÅ', '„Çà„Åè„Çè„Åã„Çâ„ÇìÔºÅ', '„Ç™„É¨„Å´ËÅû„Åè„Å™ÔºÅ',
                'ÂãùÊâã„Å´„Åó„ÇçÔºÅ'
            ]
        };
        // ‚ñ≤‚ñ≤ responses ÂÆöÁæ©„Åì„Åì„Åæ„Åß ‚ñ≤‚ñ≤

        // ... ‰ª•‰∏ã„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà„ÅÆ„É≠„Ç∏„ÉÉ„ÇØÔºàmusubu_chatbot.html„Å®Âêå„ÅòÔºâ ...
        let lastActivityTime = Date.now();
        let boredomInterval = null;
        let randomTalkInterval = null;
        let wasOfflineMessageSent = false;

        function isBusinessHours() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const currentTime = hours * 60 + minutes;
            const startTime = 14 * 60 + 50; // 14:50
            const endTime = 21 * 60 + 10;   // 21:10
            return currentTime >= startTime && currentTime <= endTime;
        }
        function updateStatusIndicator() {
            const isOnline = isBusinessHours();
            statusIndicator.className = `status-indicator ${isOnline ? '' : 'offline'}`;
            messageInput.disabled = !isOnline;
            sendButton.disabled = !isOnline;
            if (!isOnline) {
                messageInput.placeholder = "„ÇÄ„Åô„Å∂„ÅØ14:50-21:10„ÅÆÈñì„Å´„ÅÑ„Çã„ÇàÔºÅ";
            } else {
                messageInput.placeholder = "„ÇÄ„Åô„Å∂„Å´Ë©±„Åó„Åã„Åë„Å¶„Å≠ÔºÅ";
            }
        }
        function checkBoredom() {
            if (!isBusinessHours()) return;
            const now = Date.now();
            const timeSinceLastActivity = now - lastActivityTime;
            if (timeSinceLastActivity > 3000000) { // 50ÂàÜ
                addMessage('„Å≤„Åæ„Ç°„Ç°„ÅÇ„ÅÅ„ÅÇ„ÅÇ„ÅÇ„ÅÇ„ÅÇ„ÅÇ„ÅÇ„ÅÇÔºÅÔºÅÔºÅÔºÅÔºÅ');
                lastActivityTime = now;
            }
        }
        function randomTalk() {
            if (!isBusinessHours()) return;
            const randomPhrases = [
                '„Ç™„É¨Á•û„Åô„Åé„ÇãÔºÅ', '„Éû„Ç§„ÇØ„É©„ÇÑ„Çä„Åü„ÅÑÔºÅ', 'ÂîêËæõÂ≠êÈ£ü„Åπ„Åü„ÅÑÔºÅ', '„Ç±„É¢„Éä„ÉºÊúÄÈ´òÔºÅ', '„ÉÜ„É≥„Ç∑„Éß„É≥‰∏ä„Åå„ÇãÔºÅ',
                '„ÇÄ„Åô„Å∂„Å°„ÇÉ„Çì„Å≠„ÇãÔºÅ', '„Ç™„É¨ÊúÄÂº∑„Å†„ÅúÔºÅ', '„Ç≤„Éº„É†„Åó„Çà„ÅÜÔºÅ', '‰Ωï„Åó„Å¶„ÇãÔºü', '„Å§„Åæ„Çì„Å™„ÅÑÔºÅ',
                '„Ç™„É¨„Å´Ë©±„Åó„Åã„Åë„ÇçÔºÅ', 'Á•û„ÅÆÊôÇÈñì„Å†„ÅúÔºÅ', '„Éè„Ç§„ÉÜ„É≥„Ç∑„Éß„É≥ÔºÅ', '„Ç™„É¨„Å®ÈÅä„Åº„ÅÜÔºÅ', 'Ë©±„ÅóÁõ∏ÊâãÊ¨≤„Åó„ÅÑÔºÅ'
            ];
            const randomPhrase = randomPhrases[Math.floor(Math.random() * randomPhrases.length)];
            addMessage(randomPhrase);
            updateLastActivity();
        }
        function startBoredomTimer() {
            if (boredomInterval) clearInterval(boredomInterval);
            boredomInterval = setInterval(checkBoredom, 60000);
        }
        function startRandomTalk() {
            if (randomTalkInterval) clearInterval(randomTalkInterval);
            const interval = Math.random() * 600000 + 300000;
            randomTalkInterval = setInterval(() => {
                randomTalk();
                startRandomTalk();
            }, interval);
        }
        function updateLastActivity() {
            lastActivityTime = Date.now();
        }
        function checkOnlineStatus() {
            const currentlyOnline = isBusinessHours();
            const wasOnline = localStorage.getItem('musubu_was_online') === 'true';
            if (currentlyOnline && !wasOnline && wasOfflineMessageSent) {
                addMessage('‰ªä„Ç™„É≥„É©„Ç§„É≥„Å†„ÇàÔºÅÔºÅÔºÅÔºÅ', false, true);
                wasOfflineMessageSent = false;
            } else if (!currentlyOnline && wasOnline) {
                addMessage('„Ç™„Éï„É©„Ç§„É≥„Å´„Å™„Å£„Åü„Çà„Äú„Åæ„ÅüÂæå„ÅßÔºÅ', false, true);
                wasOfflineMessageSent = true;
            }
            localStorage.setItem('musubu_was_online', currentlyOnline.toString());
            updateStatusIndicator();
        }
        function getResponse(input) {
            const lowerInput = input.toLowerCase();
            if (/\d/.test(input)) {
                return responses['Ë®àÁÆó'][Math.floor(Math.random() * responses['Ë®àÁÆó'].length)];
            }
            for (const [keyword, responseArray] of Object.entries(responses)) {
                if (keyword === 'default') continue;
                if (lowerInput.includes(keyword.toLowerCase()) || input.includes(keyword)) {
                    return responseArray[Math.floor(Math.random() * responseArray.length)];
                }
            }
            return responses.default[Math.floor(Math.random() * responses.default.length)];
        }
        function addMessage(message, isUser = false, isSystem = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : isSystem ? 'system-message' : 'bot-message'}`;
            messageDiv.textContent = message;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            // „ÇÄ„Åô„Å∂„ÅÆÂ£∞Ôºàbot„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆ„ÅøÔºâ
            if (!isUser && !isSystem) {
                // AudioContext„Ååsuspended„Å™„ÇâresumeÔºàSafariÂØæÂøúÔºâ
                if (audioContext.state === "suspended") {
                    audioContext.resume();
                }
                const vowelsOnly = convertToVowels(message);
                playVowelSounds(vowelsOnly);
            }
        }
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            addMessage(message, true);
            messageInput.value = '';
            if (!isBusinessHours()) {
                addMessage('‰ªä„ÅØ„Ç™„Éï„É©„Ç§„É≥„Å†„Çà„Äú14:50-21:10„ÅÆÈñì„Å´Ë©±„Åó„Åã„Åë„Å¶„Å≠ÔºÅ', false, true);
                wasOfflineMessageSent = true;
                return;
            }
            updateLastActivity();
            const delay = Math.random() * 48000 + 2000;
            setTimeout(() => {
                const response = getResponse(message);
                addMessage(response);
            }, delay);
        }
        // „Ç®„É≥„Çø„Éº„Ç≠„ÉºÈÄÅ‰ø°
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !messageInput.disabled) sendMessage();
        });
        // ÂàùÊúüÂåñ
        function initialize() {
            messageInput.focus();
            checkOnlineStatus();
            startBoredomTimer();
            startRandomTalk();
            setInterval(checkOnlineStatus, 60000);
            loadAllAudio(); // Â£∞„Éá„Éº„Çø„ÇÇÂàùÊúüÂåñÊôÇ„Å´„É≠„Éº„Éâ
        }
        document.addEventListener('DOMContentLoaded', initialize);
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) checkOnlineStatus();
        });
    </script>
</body>
</html>
